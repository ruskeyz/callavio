(this["webpackJsonpvideo-call-frontend"]=this["webpackJsonpvideo-call-frontend"]||[]).push([[0],{209:function(e,t,n){},210:function(e,t,n){},432:function(e,t,n){"use strict";n.r(t);var a=n(16),c=n(0),o=n.n(c),r=n(30),i=n.n(r),s=(n(209),n(87)),l=(n(210),n(53)),u=n(104),d=n.n(u),j=n(178),m=n(179),b=n.n(m),p=n(436),f=n(435),h=n(437),O=n(438),v=n(198),x={labelCol:{span:8},wrapperCol:{span:8}},g={wrapperCol:{offset:8,span:8}},k=function(e){var t=e.setToken,n=e.setName,c=e.setRoom,o=e.name,r=e.room,i=function(){var e=Object(j.a)(d.a.mark((function e(n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.post("https://video-call-5385-dev.twil.io/video-token",{identity:o,room:r});case 2:a=e.sent,t(a.data),console.log("Got token",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)(p.a,{children:Object(a.jsxs)(f.a,Object(l.a)(Object(l.a)({},x),{},{onFinish:i,children:[Object(a.jsx)(f.a.Item,{label:"Username",name:"name",id:"name",value:o,onChange:function(e){return n(e.target.value)},rules:[{required:!0,message:"Please input your username!"}],children:Object(a.jsx)(h.a,{})}),Object(a.jsx)(f.a.Item,{label:"Room",name:"room",id:"room",initialValue:r,value:r,onChange:function(e){return c(e.target.value)},rules:[{required:!0,message:"Please input your room!"}],children:Object(a.jsx)(h.a,{})}),Object(a.jsx)(f.a.Item,Object(l.a)(Object(l.a)({},g),{},{name:"remember",valuePropName:"checked",children:Object(a.jsx)(O.a,{children:"Remember me"})})),Object(a.jsx)(f.a.Item,Object(l.a)(Object(l.a)({},g),{},{children:Object(a.jsx)(v.a,{type:"primary",htmlType:"submit",children:"Submit"})}))]}))})},y=n(107),C=n.n(y),w=function(e){var t=e.token,n=e.room,o=Object(c.useRef)(),r=Object(c.useRef)(),i=function(e,t){var n=document.createElement("div");n.setAttribute("id",t),n.appendChild(e.attach()),r.current.appendChild(n)};return Object(c.useEffect)((function(){return console.log(t),C.a.connect(t,{video:!0,audio:!0,name:n}).then((function(e){console.log("Connected to callav.io"),C.a.createLocalVideoTrack().then((function(e){o.current.appendChild(e.attach())}));var t=function(e){console.log("Participant added"),e.tracks.forEach((function(t){if(t.isSubscribed){var n=t.track;i(n,e.identity),console.log("Attached a track")}})),e.on("trackSubscribed",(function(t){console.log("Appending new track"),i(t,e.identity)}))};e.participants.forEach(t),e.on("participantConnected",t),e.on("participantDisconnected",(function(e){console.log("Removing participant by id",e.identity);var t=document.getElementById(e.identity);t.parentNode.removeChild(t)}))})).catch((function(e){console.log(e)})),function(){}}),[t,n]),Object(a.jsxs)(p.a,{children:[Object(a.jsxs)("h1",{children:["Your are in room : ",n]}),Object(a.jsx)("div",{ref:o}),Object(a.jsx)("div",{ref:r})]})};var R=function(){var e=Object(c.useState)(""),t=Object(s.a)(e,2),n=t[0],o=t[1],r=Object(c.useState)(""),i=Object(s.a)(r,2),l=i[0],u=i[1],d=Object(c.useState)("Primary Room"),j=Object(s.a)(d,2),m=j[0],b=j[1];return Object(a.jsx)("div",{className:"App",children:n?Object(a.jsx)(w,{token:n,room:m}):Object(a.jsx)(k,{setToken:o,setName:u,name:l,setRoom:b,room:m})})};i.a.render(Object(a.jsx)(o.a.StrictMode,{children:Object(a.jsx)(R,{})}),document.getElementById("root"))}},[[432,1,2]]]);
//# sourceMappingURL=main.a55e9332.chunk.js.map